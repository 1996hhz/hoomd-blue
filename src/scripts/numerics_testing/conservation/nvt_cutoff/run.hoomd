#! /usr/bin/env hoomd

from hoomd_script import *
import os

r_cut_array = [2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8, 2.9, 3.0, 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 3.7, 3.8, 3.9, 4.0]

# parse task id
task_id = int(os.environ['SGE_TASK_ID'])-1;

cut = r_cut_array[task_id];
name = "r" + str(int(cut*10));

init.create_random(N=32000, phi_p=0.2)
lj = pair.lj(r_cut=cut)
lj.pair_coeff.set('A', 'A', epsilon=1.0, sigma=1.0, alpha=1.0)

integrate.nvt(dt=0.005, T=1.0, tau=0.5)

# equilibrate
run(999999)
# zero momentum
z = update.zero_momentum(period=1)
run(1)
z.disable()

# continue running in nvt enseble with log output

analyze.log(filename = name + "_log.txt", period=1000, quantities=["temperature", "pressure", "kinetic_energy", "pair_lj_energy", "conserved_quantity", "momentum"]);

run(5e6);
